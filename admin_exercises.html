<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DuoFit - 운동 관리</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="logo" href="index.html">DUO<span class="logo-fit">FIT</span></a>
            <a href="admin_dashboard.html" class="btn btn-secondary btn-sm"><i class="bi bi-arrow-left"></i> 회원 관리로</a>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2 class="mb-0">운동 목록 관리</h2>
        </div>

        <div class="row g-4">
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>운동 이름</th>
                                        <th>운동 부위</th>
                                        <th>작업</th>
                                    </tr>
                                </thead>
                                <tbody id="exercise-list">
                                    <!-- JS will populate this -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title mb-3">새 운동 추가</h4>
                        <form id="add-exercise-form">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="exercise-name" placeholder="운동 이름" required>
                                <label for="exercise-name">운동 이름</label>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="exercise-part" placeholder="운동 부위" required>
                                <label for="exercise-part">운동 부위</label>
                            </div>
                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary">추가하기</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="storage.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const exerciseListBody = document.getElementById('exercise-list');
            const addExerciseForm = document.getElementById('add-exercise-form');

            function renderExercises() {
                exerciseListBody.innerHTML = '';
                const exercises = getExercises();
                if (exercises.length === 0) {
                    exerciseListBody.innerHTML = '<tr><td colspan="3" class="text-center">등록된 운동이 없습니다.</td></tr>';
                    return;
                }
                exercises.forEach(ex => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${ex.name}</td>
                        <td><span class="badge bg-primary">${ex.part}</span></td>
                        <td>
                            <button class="btn btn-sm btn-outline-danger delete-exercise-btn" data-id="${ex.id}">
                                <i class="bi bi-trash"></i>
                            </button>
                        </td>
                    `;
                    exerciseListBody.appendChild(row);
                });
            }

            addExerciseForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const nameInput = document.getElementById('exercise-name');
                const partInput = document.getElementById('exercise-part');
                addExercise({ name: nameInput.value, part: partInput.value });
                addExerciseForm.reset();
                renderExercises();
            });

            exerciseListBody.addEventListener('click', (e) => {
                const deleteBtn = e.target.closest('.delete-exercise-btn');
                if (deleteBtn) {
                    const exerciseId = deleteBtn.dataset.id;
                    if (confirm('이 운동을 삭제하시겠습니까? 모든 사용자의 해당 운동 기록도 함께 삭제됩니다.')) {
                        deleteExercise(exerciseId);
                        renderExercises();
                    }
                }
            });

            renderExercises();
        });
    </script>
</body>
</html>
